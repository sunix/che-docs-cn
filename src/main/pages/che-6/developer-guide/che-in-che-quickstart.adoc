---
title: 通过Che开发您的第一个插件(Plugin)
sidebar: che_6_docs
keywords: dev docs, developer docs, plugins, extensions
tags: [extensions, dev-docs, assembly]
permalink: che-6/che-in-che-quickstart.html
redirect_from: che-in-che-quickstart.html
folder: che-6/developer-guide
---

在深入了解如何link:framework-overview.html[扩展Che框架]和建立自己的Chelink:assemblies.html[程序集]之前，让我们使用Che本身安装和调试第一个Che插件。

[id="run-eclipse-che"]
== 运行Eclipse Che

* 在Docker上安装Che: link:docker-single-user.html[单用户] 或 link:docker-multi-user.html[多用户]
* 在OpenShift上安装Che: link:openshift-single-user.html[单用户] or link:openshift-multi-user.html[多用户]

[id="create-workspace-and-sample-extension"]
== 创建工作空间和示例扩展

通过关键字 `Che` 搜索栈(stack)，并选择 `che-ide-server-extension` 作为示例项目。此扩展既是IDE也是服务端的扩展。它带有新的菜单项、对IDE的操作(Action)以及从简单REST服务返回的通知(notification)。

image::devel/create_extension.png[]

[id="build-a-deploy-your-extension"]
== 构建部署扩展

When the project shows up in project explorer, you will find 2 main Maven modules: `assembly` (See: link:assemblies.html[Assemblies]) and plugins (containing plugins themselves).

Execute `Traefik Start`, `Tomcat8-IDE Start`, `Deploy IDE` and `Deploy Workspace Agent` commands:

image::devel/commands.png[]

* Tomcat8-IDE Start - the name speaks for itself. The command starts a Tomcat 8 server
* Traefik Start - we need some smart redirects inside a workspace. By design, the IDE tries to reach workspace master at the same host:port it is running. Since we will access the 2nd IDE instance on the same host, but a different port (it’s a random port from the ephemeral port range that Docker uses to publish exposed ports)
* Deploy IDE - build ide-war module and its dependencies and packages `war` artifact and copies ide.war from `assembly-ide-war` target dir over to Tomcat’s webapp
* Deploy Workspace Agent does the same with the agent war artifact

The last two commands have identical preview URLs pointing to `host:port` Tomcat 8 with two extensions is bound to. You will notice `?wsagent-ref-prefix=dev-` appended to the URL. This param is an instruction for the IDE to connect to your custom workspace agent, not the default one (this is where Traefik magic happens). Click this preview URL, and when you are in the 2nd instance of IDE, call context menu in the project explorer (right click) to find *MyAction*. Click it to see a notification with `Hello CheeAllPowerfull` message:

image::devel/sample_action.png[]

[id="develop-and-debug-client-side"]
== Develop and Debug Client Side

Get back to an original IDE instance and execute `GWT SDM` command which will run http://www.gwtproject.org/articles/superdevmode.html[GWT Super Dev Mode]. You can find more info about Super Dev Mode in Che at link:ide-extensions-gwt.html#debugging-with-super-devmode[this page]. When the compilation is completed, hit the preview URL which will display a page with further instructions. You’ll have to drag 2 bookmarks to your browser’s bookmarks bar. Having done that, change menu item title in `MyAction.java`:

[source,java]
----
    super("My New Action", "My Action Description");
----

Return to the 2nd IDE instance, click *Dev Mode On* button and hit *Compile*. Re-compilation should take ~15 seconds. Once done, call context menu in the project explorer again to see your changes.

You can also debug your client code in the browser. In the 2nd IDE instance with your custom plugin, open `Chrome dev console > Sources > Ctrl + P > MyAction.java`. Set a breakpoint in this class and call `My New Action` in the context menu.

image::devel/debug_chrome.png[]

[id="develop-and-debug-server-side"]
== Develop and Debug Server Side

Let’s change response from our REST service in `MyService.java`:

[source,java]
----
public String sayHello(@PathParam("name") String name) {
  return "Howdy, " + name + "!";
}
----

Select this submodule in project explorer (`plugin-serverservice-server`) and run `Build` and `Workspace Agent Hot Deploy` commands one by one that will package your extension into jar artifact and swap it (by copying) in Tomcat’s `webapps/ROOT/WEB-INF/lib/` that Tomcat hot deploys it. Now return to your 2nd IDE instance, call My New Action and get an updated response from server side.

It’s time to *debug* this REST service. By default, we have started Tomcat in a debug mode (`jpda run`) on port 9000 which we will use to attach Che debugger.

Open `MyService.java` and set a breakpoint on line 31 (where response is returned). Go to *Run > Edit Debug Configurations > Java > Connect to process on a workspace machine > port 9000*. Save this configuration and click Debug. You will also see this configuration at *Run > Debug*.

Return to the 2nd IDE instance and call My New Action. You will get stuck and see a loader. In the main IDE instance you will see a debugger panel:

image::devel/debugger.png[]

In Variable window, click `Change variable` icon and replace the value with anything you like. Hit Resume (F9) and get back to your 2nd IDE instance to see the updated response from the REST service.

